---
title: "ProyectoTD2024"
output: html_document
author: "Eric Villaescusa, ...Poner nombres"
date: "2024-03-30"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(readr)
```

```{r}
#Cargamos los nombres de cada tiket (guardados en la carpeta data)
files <- list.files(path = "./data", pattern = ".txt", full.names = TRUE)

#Asignamos las líneas de los archivos .txt
for (file in files) {
  linea <- read_lines(file, locale = locale(encoding = 'latin1'))
  supermercado <- linea[1]
  direccion <- linea[2]
  ciudad <- linea[3]
  telefono <- linea[4]
  fecha <- linea[5]
  factura <- linea[6]
  indice <- grep("TOTAL", linea)
  productos <- linea[8:indice - 1]
  precio <- linea[indice]
  #Falta IVA
  tarjetabancaria <- linea[indice + 7]
}

#Creamos un data frame con los datos asignados
datos <- data.frame(
  Supermercado <- supermercado,
  Dirección <- direccion,
  Ciudad <- ciudad,
  Teléfono <- telefono,
  Fecha <- fecha,
  Factura <- factura,
  Productos <- productos, #Falta distinguir entre los distintos productos porque tienen distintos formatos
  Precio <- precio,
  #Falta asignar el IVA
)
```
 

